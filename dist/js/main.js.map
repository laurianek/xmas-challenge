{"version":3,"sources":["arrayForEachPolyfill.js","arrayReducePolyfill.js","grid.js","player.js","app.js","gameconst.js","colourservice.js","gameplayservice.js","mainctrl.js"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["// Production steps of ECMA-262, Edition 5, 15.4.4.18\n// Reference: http://es5.github.io/#x15.4.4.18\nif (!Array.prototype.forEach) {\n\n  Array.prototype.forEach = function(callback, thisArg) {\n\n    var T, k;\n\n    if (this == null) {\n      throw new TypeError(' this is null or not defined');\n    }\n\n    // 1. Let O be the result of calling ToObject passing the |this| value as the argument.\n    var O = Object(this);\n\n    // 2. Let lenValue be the result of calling the Get internal method of O with the argument \"length\".\n    // 3. Let len be ToUint32(lenValue).\n    var len = O.length >>> 0;\n\n    // 4. If IsCallable(callback) is false, throw a TypeError exception.\n    // See: http://es5.github.com/#x9.11\n    if (typeof callback !== \"function\") {\n      throw new TypeError(callback + ' is not a function');\n    }\n\n    // 5. If thisArg was supplied, let T be thisArg; else let T be undefined.\n    if (arguments.length > 1) {\n      T = thisArg;\n    }\n\n    // 6. Let k be 0\n    k = 0;\n\n    // 7. Repeat, while k < len\n    while (k < len) {\n\n      var kValue;\n\n      // a. Let Pk be ToString(k).\n      //   This is implicit for LHS operands of the in operator\n      // b. Let kPresent be the result of calling the HasProperty internal method of O with argument Pk.\n      //   This step can be combined with c\n      // c. If kPresent is true, then\n      if (k in O) {\n\n        // i. Let kValue be the result of calling the Get internal method of O with argument Pk.\n        kValue = O[k];\n\n        // ii. Call the Call internal method of callback with T as the this value and\n        // argument list containing kValue, k, and O.\n        callback.call(T, kValue, k, O);\n      }\n      // d. Increase k by 1.\n      k++;\n    }\n    // 8. return undefined\n  };\n}","// Production steps of ECMA-262, Edition 5, 15.4.4.21\n// Reference: http://es5.github.io/#x15.4.4.21\nif (!Array.prototype.reduce) {\n  Array.prototype.reduce = function(callback /*, initialValue*/) {\n    'use strict';\n    if (this == null) {\n      throw new TypeError('Array.prototype.reduce called on null or undefined');\n    }\n    if (typeof callback !== 'function') {\n      throw new TypeError(callback + ' is not a function');\n    }\n    var t = Object(this), len = t.length >>> 0, k = 0, value;\n    if (arguments.length == 2) {\n      value = arguments[1];\n    } else {\n      while (k < len && !(k in t)) {\n        k++;\n      }\n      if (k >= len) {\n        throw new TypeError('Reduce of empty array with no initial value');\n      }\n      value = t[k++];\n    }\n    for (; k < len; k++) {\n      if (k in t) {\n        value = callback(value, t[k], k, t);\n      }\n    }\n    return value;\n  };\n}","'use strict';\n\nclass Grid {\n  constructor(square = 3) {\n    this.square = square;\n    this.grid = [];\n    this.gameOver = false;\n    this.freeCell = Math.pow(this.square, 2);\n    for (let row = 0; row < this.square; row++) {\n      this.grid[row] = [];\n      for (let col = 0; col < this.square; col++) {\n        this.grid[row][col] = null;\n      }\n    }\n  }\n  mark(position, marker) {\n    if (this.gameOver) {\n      return false;\n    }\n    if (!this.withinGridBounds(position) || this.isAlreayMarked(position)) {\n      return false;\n    }\n    this.grid[position.row][position.col] = marker;\n    this.freeCell--;\n    var game = this.gameWon(position);\n    if (game.isGameOver) {\n      this.gameOver = game.isGameOver;\n      return game;\n    }\n    game.isGameOver = 0 === this.freeCell;\n    this.gameOver = game.isGameOver;\n    return game;\n  }\n  withinGridBounds(position) {\n    return (position.row >= 0 && position.row < this.square) &&\n      (position.col >= 0 && position.col < this.square);\n  }\n  isAlreayMarked(position) {\n    return this.grid[position.row][position.col];\n  }\n  winReduce(position, mark, fns) {\n    if(fns.extraCheck && fns.extraCheck(position)) {\n      return false;\n    }\n    for (let i = 0, j = this.square-1, cell; i < this.square; i++, j--) {\n      cell = fns.cell(position, i, j);\n      if (!cell || cell.symbol !== mark.symbol) {\n        return false;\n      }\n    }\n    return fns.returnValue;\n  }\n  gameWon(position) {\n    var _this = this;\n    var currentMark = this.isAlreayMarked(position);\n    var checks = [\n      {\n        cell: function hzw (position, i, j) { return _this.grid[position.row][i]; },\n        returnValue: Grid.constant.HZ_WIN\n      },\n      {\n        cell: function vtw (position, i, j) { return _this.grid[i][position.col]; },\n        returnValue: Grid.constant.VT_WIN\n      },\n      {\n        cell: function lhdw(position, i, j) { return _this.grid[i][i]; },\n        extraCheck(position) { return position.row !== position.col },\n        returnValue: Grid.constant.LHD_WIN\n      },\n      {\n        cell: function rhdw(position, i, j) { return _this.grid[i][j]; },\n        extraCheck(position) { return position.row !== _this.square - 1 - position.col },\n        returnValue: Grid.constant.RHD_WIN\n      }\n    ];\n    var win = checks.reduce(function winReduceFn(previousValue, currentObj) {\n      if (previousValue) {\n        return previousValue;\n      }\n      return _this.winReduce(position, currentMark, currentObj);\n    }, false);\n    if (win) {\n      return { isGameWon: true, winType: win, isGameOver: true };\n    }\n    return { isGameWon: false, winType: '', isGameOver: false };\n  }\n}\n\nGrid.constant = {\n  HZ_WIN: 'horizontal win',\n  VT_WIN: 'vertical win',\n  LHD_WIN: 'left hand-side diagonal win',\n  RHD_WIN: 'right hand-side diagonal win'\n};","'use strict';\n\nclass Player {\n  constructor (name, marker, isBot = false, score = 0, colour = 'red') {\n    this.name = name;\n    this.marker = marker;\n    this.score = score;\n    this.colour = colour;\n    this.isBot = isBot;\n    this.canPlay = false;\n  }\n\n  addPoints(_point) {\n    var point = Number(_point);\n    if(point) {\n      this.score += point;\n    }\n  }\n\n  static getRandomCell() {\n    var a = Math.floor(Math.random() * 100);\n    var boundary = Math.floor(100 / 3);\n    if (0 <= a && a < boundary) {\n      return 0;\n    }\n    if (boundary <= a && a < 2 * boundary) {\n      return 1;\n    }\n    return 2;\n  }\n\n  setCanPlay(deffered) {\n    var _this = this;\n    this.canPlay = deffered;\n    if(this.isBot) {\n      setTimeout(function botMove() {\n        _this.mark(Player.getRandomCell(), Player.getRandomCell())\n      }, 200)\n    }\n    return this.canPlay.promise;\n  }\n\n  mark(row, col) {\n    if (this.canPlay) {\n      this.canPlay.resolve({row: row, col: col});\n      this.canPlay = false;\n    }\n  }\n\n  reset() {\n    this.canPlay = false;\n  }\n}\n\nPlayer.colourArray = [\n  'red',\n  'yellow',\n  'green',\n  'blue',\n  'pink'\n];","'use strict';\n\nvar app = angular.module('tictactoe', []);","'use strict';\n\napp.constant('GameConst', {\n  NOUGHT: 'nought',\n  CROSS: 'cross',\n  NOUGHT_CLASS: 'symbol-nought',\n  CROSS_CLASS: 'symbol-cross',\n  WIN_POINT: 1,\n  DRAW_POINT: 0.5,\n  SINGLE_PLAYER: 'single-player',\n  MULTI_PLAYER: 'multy-player'\n});","'use strict';\n\n(function(){\n  class ColourService {\n    getSymbolColour(obj, players) {\n      if(obj.player) {\n        return `symbol-${obj.player.colour}`;\n      }\n      if(obj.marker) {\n        let player = players[0].marker.symbol == obj.marker.symbol ? players[0] : players[1];\n        return `symbol-${player.colour}`;\n      }\n      return '';\n    }\n  }\n\n  app.service('ColourService', ColourService);\n})();\n\n","'use strict';\n\napp.factory('GamePlayService', function (GameConst, $q) {\n\n  // Service variables\n\n  var grid;\n  var isPlayer1Turn;\n  var player1Start;\n  var gameOutcomeMsg = '';\n  var previousSolo;\n\n  var player1 = getNewPlayer('Player 1', false);\n  var player2 = getNewPlayer('Player 2 (bot)', true, true);\n\n  var gameMode = {\n    mode: GameConst.SINGLE_PLAYER,\n    sessionPlayer: player1,\n    players: [player1, player2]\n  };\n\n  // Service functions\n  function getGrid() {\n    if (!grid) { newGame(); }\n    return grid;\n  }\n  function getPlayers() {\n    return [player1, player2];\n  }\n  function newGame() {\n    grid = new Grid();\n    player1Start = typeof(player1Start) === 'undefined' ? true : !player1Start;\n    isPlayer1Turn = player1Start;\n    gameOutcomeMsg = '';\n    getCurrentPlayerMove()\n  }\n  function changePlayer() {\n    return isPlayer1Turn = !isPlayer1Turn;\n  }\n  function currentPlayer() {\n    return isPlayer1Turn? player1 : player2;\n  }\n  function isCurrentPlayer(player) {\n    return player.marker === currentPlayer().marker;\n  }\n  function isGameOver() {\n    return getGrid().gameOver;\n  }\n  function markHandler(row, col) {\n    if (gameMode.mode === GameConst.SINGLE_PLAYER && currentPlayer() === gameMode.sessionPlayer) {\n      currentPlayer().mark(row, col);\n    }\n    else if (gameMode.mode === GameConst.MULTI_PLAYER) {\n      currentPlayer().mark(row, col);\n    }\n  }\n  function getCurrentPlayerMove() {\n    var playerDeferred = $q.defer();\n    currentPlayer().setCanPlay(playerDeferred).then(function success(position) {\n      mark(position);\n    });\n  }\n  function mark(position) {\n    var game = getGrid().mark(position, currentPlayer().marker);\n    if(!game) {\n      getCurrentPlayerMove();\n      return;\n    }\n    //save game points\n    if (game.isGameOver) {\n      if (game.isGameWon) {\n        currentPlayer().addPoints(GameConst.WIN_POINT);\n        gameOutcomeMsg = `${currentPlayer().name} won this round!`;\n        return;\n      }\n      getPlayers().forEach(function(player) {\n        player.addPoints(GameConst.DRAW_POINT);\n      });\n      gameOutcomeMsg = 'Draw!';\n      return;\n    }\n    changePlayer();\n    getCurrentPlayerMove();\n  }\n  function getGameOutcomeMsg() {\n    return gameOutcomeMsg;\n  }\n  function switchPlayMode() {\n    if (gameMode.mode === GameConst.SINGLE_PLAYER) {\n      previousSolo = gameMode;\n      player1 = getNewPlayer('Player 1', false);\n      player2 = getNewPlayer('Player 2', true);\n      newGame();\n      gameMode = {\n        mode: GameConst.MULTI_PLAYER\n      };\n      return GameConst.MULTI_PLAYER;\n    }\n    if (gameMode.mode === GameConst.MULTI_PLAYER) {\n      gameMode = previousSolo;\n      player1 = gameMode.players[0];\n      player2 = gameMode.players[1];\n      newGame();\n      return GameConst.SINGLE_PLAYER;\n    }\n  }\n  function getNewPlayer(name, isCross, isBot) {\n    if (isCross) {\n      return new Player(name, {\n        symbol: GameConst.CROSS,\n        _class: GameConst.CROSS_CLASS\n      }, isBot);\n    }\n    return new Player(name, {\n      symbol: GameConst.NOUGHT,\n      _class: GameConst.NOUGHT_CLASS\n    }, isBot);\n  }\n\n  // returned API\n  return {\n    getGrid: getGrid,\n    getPlayers: getPlayers,\n    getGameOutcomeMsg: getGameOutcomeMsg,\n    isCurrentPlayer: isCurrentPlayer,\n    newGame: newGame,\n    isGameOver: isGameOver,\n    markHandler: markHandler,\n    switchPlayMode: switchPlayMode\n  };\n});\n","'use strict';\n\napp.controller('mainCtrl', function($scope, $q, GameConst, GamePlayService, ColourService) {\n  $scope.players = GamePlayService.getPlayers();\n  $scope.config = {colour: 'colour', symbol: 'marker', score: 'score'};\n  $scope.isCurrentPlayer = GamePlayService.isCurrentPlayer;\n  $scope.colours = Player.colourArray;\n  $scope.getSymbolColour = function(obj) { return ColourService.getSymbolColour(obj, GamePlayService.getPlayers());};\n  $scope.mark = GamePlayService.markHandler;\n  $scope.switchText = 'switch to multiplayer';\n  $scope.replay = init;\n  $scope.switchPlayMode = switchPlayMode;\n  init();\n\n  function init() {\n    GamePlayService.newGame();\n    $scope.grid = GamePlayService.getGrid();\n    $scope.isGameOver = GamePlayService.isGameOver();\n  }\n  function switchPlayMode() {\n    var playMode = GamePlayService.switchPlayMode();\n    $scope.switchText = playMode === GameConst.MULTI_PLAYER ? 'switch to soloplay' : 'switch to multiplayer';\n    $scope.players = GamePlayService.getPlayers();\n    $scope.grid = GamePlayService.getGrid();\n    $scope.isGameOver = GamePlayService.isGameOver();\n  }\n\n  $scope.$watch(function() {\n    return GamePlayService.isGameOver();\n  }, function(newVal) {\n    $scope.isGameOver = newVal;\n    $scope.msg = GamePlayService.getGameOutcomeMsg();\n  });\n});"],"sourceRoot":"/source/"}